# Loon_plugin

Loon 每日智能推送插件：  
1) **AI 技术早报**：偏框架/推理/Serving/LLM 版本迭代（GitHub Releases Atom + 主流框架博客 RSS）  
2) **股票/指数/基金行情**：以「**当日开盘后涨跌**」为主，支持 A 股/ETF/指数/港股/美股 + 场外基金估值

---

## 1. 安装

### 在线安装（推荐）
在 Loon → 配置 → 插件 → “+” 添加插件链接：  
- `daily-notification.plugin`（本仓库）

---

## 2. 参数说明

### stockCodes（英文逗号分隔）
示例（可混合）：

- 指数：`000001,399001,399006`（自动识别为上证/深成/创业板指数）
- A 股：`600519,000858`
- ETF：`159915,510300`
- 港股：`00700,09988`
- 美股：`TSLA,AAPL`（推荐带后缀：`TSLA.OQ` / `BABA.N`，命中率更高）
- 场外基金：`012414`（自动识别）；或显式 `fund:012414`

---

## 3. 推送内容

### AI 技术早报
- 来源以 **GitHub Releases Atom** 为主（更“版本迭代/变更日志”）
- 博客 RSS 用于补充框架文章（Hugging Face / PyTorch / TensorFlow）
- 支持关键词过滤（更偏工程/框架）

### 行情推送（开盘后涨跌）
- 优先展示：**现价 vs 今开** 的涨跌（开盘后涨跌幅）
- 若无法获取今开（某些美股只拿到简版数据），会回退展示：**较昨收涨跌**
- 场外基金展示：**估值涨跌（东方财富基金估值）**

---

## 4. 自定义推送时间（可选）

在 `daily-notification.plugin` 里修改 cron：

- A 股想看开盘后：例如 `40 9 * * *`
- A 股收盘总结：例如 `0 15 * * *`
- 美股建议：开盘后（北京时间一般 21:30/22:30 附近，受夏令时影响）可设置 22:05 左右

### 新增：按市场时段自动过滤（A股/港股/美股/基金）

仓库内置的 `daily-notification.plugin` 已改为**多 cron 触发**，并在脚本内根据“当前触发时刻”只推送对应市场：

- A股/港股/基金：开盘后每隔几个小时推送一次 + 收盘总结
- 美股：新增 `usTimeMode` 选择 **SUMMER/WINTER**（夏令时/冬令时），脚本会自动过滤不匹配的 cron 触发

如你不在北京时间时区，请以**设备本地时间**为准调整 cron。

---

## 5. 数据来源说明

- 腾讯行情：`qt.gtimg.cn`（股票/指数/ETF/港股/部分美股）
- 场外基金估值：`fundgz.1234567.com.cn`

注意：公开接口可能存在限流/风控，脚本已尽量做容错与缓存。
